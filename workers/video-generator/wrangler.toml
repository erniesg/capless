name = "capless-video-generator"
main = "src/index.ts"
compatibility_date = "2024-10-01"
compatibility_flags = ["nodejs_compat"]

# Environment variables
[vars]
DEMO_MODE = "false"  # Production mode - use real video API
USE_VEO = "true"     # Use Veo 3.1 via Replicate (set to false to use Sora 2)

# R2 bucket for reading moments and storing generated videos
[[r2_buckets]]
binding = "R2"
bucket_name = "capless-preview"

# KV namespace for tracking video generation jobs
[[kv_namespaces]]
binding = "VIDEO_JOBS"
id = "edd74e3222ce46a2aa9b81884a5c2ab1"
preview_id = "b5bede46738a4d769ee047b2dcbea44e"

# Secrets (set via: wrangler secret put <SECRET_NAME>)
# OPENAI_API_KEY - Required for Sora API (when available)
# ANTHROPIC_API_KEY - Required for Claude script generation
# REPLICATE_API_TOKEN - Required for Veo 3.1 via Replicate

[env.development]
name = "capless-video-generator-dev"

[env.development.vars]
DEMO_MODE = "true"
