name = "capless-video-matcher"
main = "src/index.ts"
compatibility_date = "2025-01-20"
compatibility_flags = ["nodejs_compat"]

# R2 Storage for persisting video matches
[[r2_buckets]]
binding = "R2"
bucket_name = "capless"

# Environment variables (non-sensitive)
[vars]
YOUTUBE_CHANNEL_ID = "UC1NBkF4mXpQXvokXgRomh9w"  # MDDI Singapore channel
CACHE_TTL_SECONDS = "604800"  # 7 days

# Secrets (set with: wrangler secret put SECRET_NAME)
# Required secrets:
# - YOUTUBE_API_KEY: YouTube Data API v3 key
# - UPSTASH_REDIS_REST_URL: Upstash Redis REST URL
# - UPSTASH_REDIS_REST_TOKEN: Upstash Redis REST token

[observability]
enabled = true
