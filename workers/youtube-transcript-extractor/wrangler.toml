name = "youtube-transcript-extractor"
main = "src/index.ts"
compatibility_date = "2024-10-01"

# Enable container logs for debugging
[observability]
enabled = true

[observability.logs]
enabled = true
head_sampling_rate = 1
invocation_logs = true

# Container configuration
[[containers]]
class_name = "YouTubeExtractor"
image = "./Dockerfile.simple"
max_instances = 1

# Durable Objects binding
[[durable_objects.bindings]]
class_name = "YouTubeExtractor"
name = "YOUTUBE_EXTRACTOR"

# R2 bucket for storing transcripts
[[r2_buckets]]
binding = "R2"
bucket_name = "capless-preview"

# Migration for Durable Objects
[[migrations]]
tag = "v1"
new_sqlite_classes = ["YouTubeExtractor"]
